// Generated by CoffeeScript 1.3.3
(function() {
  var detect, uaParser;

  uaParser = require('ua-parser');

  detect = function(request) {
    var client, ua;
    ua = request.headers['user-agent'];
    client = {
      userAgent: ua,
      browser: uaParser.parse(ua),
      path: request.url,
      type: {}
    };
    if (/mobile/i.test(ua)) {
      client.type.mobile = true;
    }
    if (/Windows NT/.test(ua)) {
      client.type.windows = /Windows NT ([0-9\._]+)[\);]/.exec(ua)[1];
    }
    if (/(Intel|PPC) Mac OS X/.test(ua)) {
      client.type.mac = /(Intel|PPC) Mac OS X ?([0-9\._]*)[\)\;]/.exec(ua)[2].replace(/_/g, '.' || true);
    }
    if (/like Mac OS X/.test(ua)) {
      client.type.ios = /CPU( iPhone)? OS ([0-9\._]+) like Mac OS X/.exec(ua)[2].replace(/_/g, '.');
    }
    if (/like Mac OS X/.test(ua)) {
      client.type.iphone = /iPhone/.test(ua);
    }
    if (/like Mac OS X/.test(ua)) {
      client.type.ipad = /iPad/.test(ua);
    }
    if (/Android/.test(ua)) {
      client.type.android = /Android ([0-9\.]+)[\);]/.exec(ua)[1];
    }
    if (/webOS\//.test(ua)) {
      client.type.webos = /webOS\/([0-9\.]+)[\);]/.exec(ua)[1];
    }
    return client;
  };

  module.exports.detect = detect;

}).call(this);
